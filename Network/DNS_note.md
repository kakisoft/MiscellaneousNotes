### 正引き
ドメイン名からIPアドレスに変換
```
（使用例）
nslookup google.co.jp
```

### 逆引き
IPアドレスからドメイン名に変換
```
（使用例）
nslookup 192.168.0.115
```



## DNSサーバの種類

### フルサービスリゾルバ（DNSキャッシュサーバ）
どんな手を使おうともお問い合わせに答えてあげるのがお仕事のDNSサーバ。  
問い合わせに対して（キャッシュを見て）答えが分かれば答えてあげる、分からなければ偉いDNSサーバさんに代わりに問い合わせてくれる。  
（一度問い合わせた内容は、キャッシュに保存する。）

### 権威DNSサーバ（DNSコンテンツサーバ）
自分の管理している情報を教えるのが仕事のDNSサーバ。  
ゾーンファイルを基に仕事をする。

### DNSルートサーバ
フルサービスリゾルバが、最初に問い合わせに行くDNSサーバ。  

## DNSサーバ補足

### プライマリDNSサーバ
メインで動いている権威DNSサーバ。  
（権威DNSサーバは、通常、同じようなものが複数台同時に動いている）  
ゾーンファイルを設定する必要があるのは、これのみ。  

### セカンダリDNSサーバ
サブで動いてる方。  
プライマリからゾーンファイルを引っ張るので、ゾーンファイルの設定は不要。  


## ホストゾーン（Hosted Zone）
DNSレコードがまとめられたもの。  
AWS Management Console または Route 53 の API などで設定する。  

## DNSレコード
DNSの定義情報。どのドメインがどのIPと結びつくか、といった情報。  


## ゾーンファイル
DNSレコードが記述された情報。  
権威DNSサーバは、これを基に仕事をする。  

以下の種類がある。

### SOA（Start Of Authority）

（書式）
```
【ドメイン名】     【クラス名】 SOA 【DNSサーバのドメイン名】 【連絡先】 (
        【シリアル番号】
        【更新チェックの間隔】
        【リトライ間隔】
        【問い合わせ諦めるぜ期間】
        【ネガティブキャッシュの有効期限】 )
```

|     項目                        |    内容                                                                                        |
|:--------------------------------|:-----------------------------------------------------------------------------------------------|
| ドメイン名                      | 決まり文句。普通は「@」                                                                        |
| クラス名                        | 決まり文句。普通は「IN」                                                                       |
| DNSサーバのドメイン名           | DNSサーバ名                                                                                    |
| 連絡先                          | 「@」は「.」に換える。「.」は「\.」に換える。                                                  |
| シリアル番号                    | セカンダリDNSサーバに向けての通知。現在のバージョンを表す。年月日＋通番。                      |
| 更新チェックの間隔              | セカンダリDNSサーバがゾーンファイルをチェックする間隔。秒。                                    |
| リトライ間隔                    | セカンダリDNSサーバがゾーンファイルのチェックに失敗した場合、再チェックまでの待ち時間。秒。    |
| 問い合わせ諦めるぜ期間          | プライマリDNSサーバへのアクセスをあきらめる時間。秒。                                          |
| ネガティブキャッシュの有効期限  | 不明情報（このドメインは404とか）の保持期間。秒。                                              |


（記述例）
```
@     IN SOA ns1.example.com. postmaster.example.com. (
        2014033101
        10800
        3600
        604800
        86400 )
```


### Aレコード（エーレコード。AはAddressの頭文字）
「このドメイン名はこのIPアドレスだよ」と教えてあげる基本の書き方。  
（書式）
```
【ドメイン名】     IN A            【IPアドレス】
```
（記述例）
```
ns1.exmaple.com.     IN A            198.51.100.2
```

### AAAAレコード（クワッドエーレコード）
IPv6アドレス用のAレコード。（AレコードはIPv4アドレス用）    
IPv4（32ビット）では足りなくなるってんで128ビットにアドレス空間を広た次世代のIPがIPv6。   

### CNAMEレコード（シーネームレコード。Canonical NAME）  
CNAMEは「エイリアス（alias=通称、別名）」とも呼ばれるんだそうです。  
 「このドメイン名とこのドメイン名は同じだよ」と教えてあげる書き方。  
（書式）
 ```
 【別名】     IN CNAME            【元のドメイン名】
 ```
 （記述例）
 ```
 sub.example.com.     IN CNAME            hoge.example.com.
 ```


### MXレコード（エムエックスレコード。Mail eXchange）
メールの配送先メールサーバ。  
メールサーバが複数あるなら優先度を設定。（メール紛失を防ぐ）
 「このメアド（「＠」より後を書く）のサーバはコレだよ」という情報を伝える。
（書式）  
 ```
 【ドメイン名】    IN MX 【優先度】     【配達先メールサーバ】
 ```
(記述例) 
```
example.com.    IN MX 10     mail.example.com.
example.com.    IN MX 20     mail2.example.com.
（優先度は、数字が増えるほど優先度が下がる） 
（「MXレコード」は「Aレコード」とセットで設定。単独ではNG）
```

### NSレコード（エヌエスレコード。Name Server）
他のネームサーバを指定して対応を委ねる。サブドメインの問合せ用。
 「このドメインのことはこっちで聞いてね」と丸投げする書き方。

（書式）
```
【ドメイン名】      IN NS         【DNSサーバ名】
```

（記述例）
```
example.com.      IN NS         ns1.example.com.

```

### TXTレコード（テキストレコード。Textの略）
SPFレコード(Sender Policy Framework)とかSenderIDとも呼ばれ「なりすましメール」を防ぐ。知識が無いと書けないので、初心者には敷居が高い。
（書式）
```
【ドメイン名】     IN TXT            【コメント】
```
（）

 「IN TXT」でTXTレコード宣言をして “” 内にサーバ情報などを書くんだって。
(例) IN TXT “v=spf1 a:example.com ~all” 


### PTRレコード（ピーティーアールレコード。PoinTeRの略）
Aとは逆に「このIPアドレスはこのドメイン」と教えてあげるのですが、Aレコードとは全然別モノで、IPアドレスの割り振りの仕組みを理解していないと書けない。
エキスパート向け？
(例) aaa.bbb.ccc.ddd.in-addr.arpa. 86400 IN PTR ns.example.com. 


___

## その他

### TTL（Time To Live）
よそから問い合わされたDNS情報を保存させる時間。たいがいは86400秒=1日に設定するそうです。 



（参考サイト）  
http://server.change.jp/5-minibird/5-minibird_5/  
http://wa3.i-3-i.info

□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□□
http://pocketstudio.jp/log3/2012/03/31/migrationg_an_existing_domain_to_route53/
